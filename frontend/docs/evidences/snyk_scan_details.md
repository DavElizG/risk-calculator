## üß† Evidencia 1 ‚Äî Esc√°ner Est√°tico Local con Snyk (VS Code Extension)

**Fecha de ejecuci√≥n:** 28/10/2025  
**Herramienta utilizada:** [Snyk Vulnerability Scanner](https://marketplace.visualstudio.com/items?itemName=snyk-security.snyk-vulnerability-scanner)  
**Entorno de ejecuci√≥n:** Visual Studio Code ‚Äî Proyecto `RISK-CALCULATOR/frontend/my-app`

---

### üîç Resultados del an√°lisis

El escaneo se realiz√≥ de manera local utilizando la extensi√≥n de **Snyk**, con el objetivo de detectar vulnerabilidades en dependencias de c√≥digo abierto, c√≥digo fuente y configuraciones del entorno.

#### **1. Open Source Security**
- **Librer√≠a:** `axios@1.1.1`  
- **Tipo de vulnerabilidad:** Allocation of Resources Without Limits or Throttling  
- **Riesgo:** ‚ö†Ô∏è Medio  
- **Recomendaci√≥n:** Actualizar a una versi√≥n segura (`axios >= 1.7.2`) para reducir el riesgo de abuso de recursos en peticiones HTTP.

#### **2. Code Security**
- **Archivo afectado:** `RiskCalculatorController.cs`  
- **Tipo de vulnerabilidad:** Log Forging (riesgo de manipulaci√≥n de registros)  
- **Riesgo:** üü° Bajo  
- **Recomendaci√≥n:** Sanitizar todas las entradas antes de registrarlas en logs y aplicar pol√≠ticas de logging seguro en el backend.

#### **3. Configuration Issues**
- ‚úÖ **Resultado:** No se detectaron configuraciones inseguras en el entorno de desarrollo.

---

### üìÅ Evidencias

Las evidencias generadas se almacenaron en la siguiente ruta del proyecto:

frontend/
‚îî‚îÄ‚îÄ docs/
‚îî‚îÄ‚îÄ evidences/
‚îú‚îÄ‚îÄ snyk_scan.png
‚îî‚îÄ‚îÄ snyk_scan_details.txt

**Archivo:** `snyk_scan.png` ‚Äî contiene el resultado visual del escaneo realizado desde la extensi√≥n.  
**Archivo:** `snyk_scan_details.txt` ‚Äî contiene el resultado del escaneo detallado en formato de texto (CLI opcional).

---

### üß© Conclusi√≥n

El an√°lisis con **Snyk VS Code Extension** permiti√≥ identificar vulnerabilidades reales en dependencias y c√≥digo fuente, cumpliendo con los requerimientos del punto **1. ‚ÄúImplementar esc√°ner est√°tico local (VS Code Extension)‚Äù** del proyecto SSDLC.  

El uso de esta herramienta refuerza la **seguridad preventiva**, fomenta la **detecci√≥n temprana de riesgos**, y contribuye a mantener la **integridad del ciclo de vida seguro de desarrollo (SSDLC)** dentro del proyecto *Risk Calculator*.

---

## üîé Evidencia 2 ‚Äî An√°lisis de Calidad de C√≥digo con ESLint

**Fecha de ejecuci√≥n:** 28/10/2025  
**Herramienta utilizada:** ESLint v8.57.1 con TypeScript ESLint  
**Comando ejecutado:** `npx eslint "src/**/*.{ts,tsx,js,jsx}"`  
**Entorno de ejecuci√≥n:** Node.js ‚Äî Proyecto `RISK-CALCULATOR/frontend/my-app`

---

### üîç Resultados del an√°lisis

El escaneo se realiz√≥ utilizando **ESLint** con reglas de TypeScript y React para detectar problemas de calidad de c√≥digo, vulnerabilidades potenciales y malas pr√°cticas de programaci√≥n.

#### **Resumen de problemas detectados:**
- üî¥ **7 Errores cr√≠ticos**
- ‚ö†Ô∏è **2 Advertencias**
- üìä **5 archivos afectados**

---

### üìã Detalle de problemas por categor√≠a

#### **1. Type Safety Issues (Seguridad de Tipos)**
**Regla:** `@typescript-eslint/no-explicit-any` ‚Äî **6 ocurrencias**  
**Severidad:** üî¥ Error  
**Riesgo:** Alto - P√©rdida de type safety, posibles errores en runtime

| Archivo | L√≠nea | Descripci√≥n |
|---------|-------|-------------|
| `src/App.tsx` | 50:46 | Uso de `any` en tipo de datos |
| `src/App.tsx` | 86:72 | Uso de `any` en tipo de datos |
| `src/services/riskCalculatorApi.ts` | 39:40 | Uso de `any` en par√°metros de funci√≥n |
| `src/services/riskCalculatorApi.ts` | 45:22 | Uso de `any` en tipo de retorno |
| `src/types/riskCalculator.ts` | 28:39 | Uso de `any` en definici√≥n de tipo |
| `src/types/riskCalculator.ts` | 119:39 | Uso de `any` en definici√≥n de tipo |

**Impacto de seguridad:**
- ‚ùå **Bypass de validaci√≥n de tipos:** El uso de `any` elimina la protecci√≥n que ofrece TypeScript
- ‚ùå **Posibles errores en runtime:** No se detectan errores de tipo en tiempo de compilaci√≥n
- ‚ùå **Vulnerabilidad a inyecci√≥n de datos:** Sin validaci√≥n estricta de tipos, datos maliciosos pueden pasar

**Recomendaci√≥n:**
```typescript
// ‚ùå Evitar
const handleData = (data: any) => { ... }

// ‚úÖ Usar tipos espec√≠ficos o gen√©ricos
const handleData = <T extends RiskData>(data: T) => { ... }

// ‚úÖ Usar Zod para validaci√≥n en runtime
import { z } from 'zod';
const RiskDataSchema = z.object({
  threat: z.number().min(1).max(5),
  vulnerability: z.number().min(1).max(5)
});
```

---

#### **2. Logic Errors (Errores L√≥gicos)**
**Regla:** `no-dupe-else-if` ‚Äî **1 ocurrencia**  
**Severidad:** üî¥ Error  
**Riesgo:** Medio - C√≥digo inaccesible, l√≥gica incorrecta

| Archivo | L√≠nea | Descripci√≥n |
|---------|-------|-------------|
| `src/services/riskCalculatorApi.ts` | 69:16 | Condici√≥n duplicada en if-else-if chain |

**Impacto de seguridad:**
- ‚ö†Ô∏è **Dead code:** Rama de c√≥digo que nunca se ejecutar√°
- ‚ö†Ô∏è **Comportamiento inesperado:** Puede causar que validaciones de seguridad se omitan

**Recomendaci√≥n:**
```typescript
// ‚ùå Evitar condiciones duplicadas
if (status === 400) {
  // ...
} else if (status === 500) {
  // ...
} else if (status === 500) {  // ‚Üê Esta condici√≥n nunca se ejecuta
  // ...
}

// ‚úÖ Corregir l√≥gica
if (status === 400) {
  // ...
} else if (status === 500) {
  // ...
} else if (status === 503) {  // Condici√≥n √∫nica
  // ...
}
```

---

#### **3. React Hooks Issues (Problemas de Hooks)**
**Regla:** `react-hooks/exhaustive-deps` ‚Äî **1 ocurrencia**  
**Severidad:** ‚ö†Ô∏è Warning  
**Riesgo:** Bajo - Comportamiento inesperado en efectos

| Archivo | L√≠nea | Descripci√≥n |
|---------|-------|-------------|
| `src/components/Toast.tsx` | 29:6 | useEffect con dependencia faltante: 'handleClose' |

**Impacto:**
- üîÑ **Stale closures:** El efecto puede usar valores obsoletos
- üêõ **Bugs dif√≠ciles de rastrear:** Comportamiento inconsistente en re-renders

**Recomendaci√≥n:**
```typescript
// ‚úÖ Opci√≥n 1: Agregar la dependencia
useEffect(() => {
  // ...
}, [handleClose]);

// ‚úÖ Opci√≥n 2: Usar useCallback para estabilizar la funci√≥n
const handleClose = useCallback(() => {
  // ...
}, []);

useEffect(() => {
  // ...
}, [handleClose]);
```

---

#### **4. Fast Refresh Issues (Problemas de Hot Module Replacement)**
**Regla:** `react-refresh/only-export-components` ‚Äî **1 ocurrencia**  
**Severidad:** ‚ö†Ô∏è Warning  
**Riesgo:** Muy Bajo - Solo afecta experiencia de desarrollo

| Archivo | L√≠nea | Descripci√≥n |
|---------|-------|-------------|
| `src/contexts/ThemeContext.tsx` | 10:14 | Exportaci√≥n mixta de componentes y constantes |

**Recomendaci√≥n:**
```typescript
// ‚ùå Evitar exports mixtos
export const ThemeContext = createContext(...);
export const ThemeProvider = () => { ... };

// ‚úÖ Separar en archivos diferentes
// theme-context.ts
export const ThemeContext = createContext(...);

// ThemeProvider.tsx
import { ThemeContext } from './theme-context';
export const ThemeProvider = () => { ... };
```

---

### üìä An√°lisis de Impacto por Severidad

```
üî¥ ERRORES CR√çTICOS (7):
‚îú‚îÄ‚îÄ Type Safety: 6 (86%)
‚îî‚îÄ‚îÄ Logic Errors: 1 (14%)

‚ö†Ô∏è ADVERTENCIAS (2):
‚îú‚îÄ‚îÄ React Hooks: 1 (50%)
‚îî‚îÄ‚îÄ Fast Refresh: 1 (50%)
```

**Distribuci√≥n por archivo:**
- `riskCalculatorApi.ts`: 3 errores (43%)
- `App.tsx`: 2 errores (29%)
- `riskCalculator.ts`: 2 errores (29%)
- `Toast.tsx`: 1 warning (14%)
- `ThemeContext.tsx`: 1 warning (14%)

---

### üõ°Ô∏è Recomendaciones de Seguridad

#### **Alta Prioridad (Semana 1):**
1. ‚úÖ **Eliminar todos los `any` types** y reemplazar con tipos espec√≠ficos o gen√©ricos
2. ‚úÖ **Corregir la condici√≥n duplicada** en `riskCalculatorApi.ts` l√≠nea 69
3. ‚úÖ **Implementar validaci√≥n con Zod** en todas las funciones que usan `any`

#### **Media Prioridad (Semana 2):**
4. ‚ö†Ô∏è **Corregir dependencias de React Hooks** en `Toast.tsx`
5. ‚ö†Ô∏è **Refactorizar exports** en `ThemeContext.tsx` para mejorar HMR

#### **Configuraci√≥n Recomendada de ESLint:**
```javascript
// eslint.config.js - Reglas de seguridad adicionales
export default tseslint.config({
  rules: {
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/no-unsafe-assignment': 'error',
    '@typescript-eslint/no-unsafe-member-access': 'error',
    '@typescript-eslint/no-unsafe-call': 'error',
    '@typescript-eslint/no-unsafe-return': 'error',
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    'no-dupe-else-if': 'error',
    'react-hooks/exhaustive-deps': 'warn',
  }
});
```

---

### üìÅ Evidencias

```bash
# Comando ejecutado
PS C:\Users\majif\Downloads\risk-calculator\frontend\my-app> npx eslint "src/**/*.{ts,tsx,js,jsx}"

# Salida completa
C:\Users\majif\Downloads\risk-calculator\frontend\my-app\src\App.tsx
  50:46  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
  86:72  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

C:\Users\majif\Downloads\risk-calculator\frontend\my-app\src\components\Toast.tsx
  29:6  warning  React Hook useEffect has a missing dependency: 'handleClose'. 
       Either include it or remove the dependency array  react-hooks/exhaustive-deps

C:\Users\majif\Downloads\risk-calculator\frontend\my-app\src\contexts\ThemeContext.tsx
  10:14  warning  Fast refresh only works when a file only exports components. 
        Use a new file to share constants or functions between components  
        react-refresh/only-export-components

C:\Users\majif\Downloads\risk-calculator\frontend\my-app\src\services\riskCalculatorApi.ts
  39:40  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
  45:22  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
  69:16  error  This branch can never execute. Its condition is a duplicate or covered 
        by previous conditions in the if-else-if chain  no-dupe-else-if

C:\Users\majif\Downloads\risk-calculator\frontend\my-app\src\types\riskCalculator.ts
  28:39  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any
  119:39  error  Unexpected any. Specify a different type  @typescript-eslint/no-explicit-any

‚úñ 9 problems (7 errors, 2 warnings)
```

**Archivos de evidencia generados:**
```
frontend/
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ evidences/
        ‚îú‚îÄ‚îÄ eslint_scan_output.txt          ‚Üê Salida completa del comando
        ‚îú‚îÄ‚îÄ eslint_config.js                ‚Üê Configuraci√≥n utilizada
        ‚îî‚îÄ‚îÄ eslint_security_report.md       ‚Üê Este documento
```

---

### üß© Conclusi√≥n

El an√°lisis con **ESLint** permiti√≥ identificar **9 problemas de calidad de c√≥digo** que incluyen:
- ‚úÖ **Riesgos de seguridad de tipos:** 6 usos de `any` que eliminan protecci√≥n TypeScript
- ‚úÖ **Errores l√≥gicos:** 1 condici√≥n duplicada que genera c√≥digo inaccesible
- ‚úÖ **Mejoras de estabilidad:** 2 advertencias sobre hooks y HMR

**Cumplimiento con SSDLC:**
- üéØ **Static Analysis:** An√°lisis est√°tico automatizado integrado en el flujo de desarrollo
- üéØ **Code Quality:** Detecci√≥n temprana de problemas antes de commit
- üéØ **Type Safety:** Enforcement de tipos estrictos para prevenir vulnerabilidades

**Pr√≥ximos pasos:**
1. Corregir los 7 errores cr√≠ticos (prioridad alta)
2. Integrar ESLint en pre-commit hooks con Husky
3. Agregar ESLint al pipeline de CI/CD
4. Establecer pol√≠tica de "zero warnings" para nuevos PRs

---

üìÖ **√öltima actualizaci√≥n:** 28/10/2025  
üë§ **Autor de la evidencia:** _Equipo de Desarrollo ‚Äî Proyecto Risk Calculator_ Marco Jimenez, Norman Alvarado, Jose Guadamuz, Melina Cruz